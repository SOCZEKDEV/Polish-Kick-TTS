<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Polish Kick TTS</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #0e0e10;
            color: #efeff1;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        header {
            text-align: center;
            margin-bottom: 50px;
            padding: 40px;
            background: #18181b;
            border-radius: 12px;
            border: 2px solid #53fc18;
            box-shadow: 0 0 30px rgba(83, 252, 24, 0.1);
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        h1 {
            font-size: 2.8em;
            font-weight: 700;
            background: linear-gradient(135deg, #53fc18 0%, #3dd80a 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 0;
            letter-spacing: -0.5px;
        }

        .subtitle {
            font-size: 1.1em;
            font-weight: 400;
            color: #adadb8;
            margin-top: 10px;
        }

        .section {
            background: #18181b;
            padding: 35px;
            border-radius: 12px;
            margin-bottom: 25px;
            border: 1px solid #2d2d35;
        }

        h2 {
            color: #53fc18;
            font-size: 1.6em;
            margin-bottom: 25px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 12px;
            letter-spacing: -0.3px;
        }

        h3 {
            color: #efeff1;
            font-size: 1.15em;
            margin: 25px 0 15px 0;
            font-weight: 600;
        }

        .generator {
            background: #1f1f23;
            padding: 40px;
            border-radius: 12px;
            margin-bottom: 30px;
            border: 2px solid #53fc18;
            box-shadow: 0 0 20px rgba(83, 252, 24, 0.08);
        }

        .form-group {
            margin-bottom: 28px;
        }

        .form-group.hidden {
            display: none;
        }

        label {
            display: block;
            margin-bottom: 10px;
            font-weight: 500;
            color: #efeff1;
            font-size: 0.95em;
        }

        input[type="text"], input[type="number"], input[type="range"], select {
            width: 100%;
            padding: 14px 16px;
            background: #0e0e10;
            border: 2px solid #2d2d35;
            border-radius: 8px;
            color: #efeff1;
            font-family: 'Inter', sans-serif;
            font-size: 0.95em;
            transition: all 0.2s ease;
        }

        select {
            cursor: pointer;
        }

        select option {
            background: #18181b;
            color: #efeff1;
            padding: 12px;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #53fc18;
            box-shadow: 0 0 0 3px rgba(83, 252, 24, 0.1);
        }

        input:hover, select:hover {
            border-color: #53fc18;
        }

        .range-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .range-container input[type="range"] {
            flex: 1;
        }

        .range-value {
            min-width: 60px;
            text-align: center;
            background: rgba(83, 252, 24, 0.1);
            padding: 10px 14px;
            border-radius: 8px;
            color: #53fc18;
            font-weight: 600;
            border: 1px solid #53fc18;
        }

        input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            height: 8px;
            background: #2d2d35;
            border-radius: 4px;
            outline: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #53fc18;
            cursor: pointer;
            border-radius: 50%;
            box-shadow: 0 0 5px rgba(83, 252, 24, 0.5);
        }

        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: #53fc18;
            cursor: pointer;
            border-radius: 50%;
            border: none;
            box-shadow: 0 0 5px rgba(83, 252, 24, 0.5);
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 12px;
            margin-top: 12px;
        }

        .checkbox-item {
            background: #0e0e10;
            border: 2px solid #2d2d35;
            border-radius: 8px;
            padding: 14px 16px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .checkbox-item:hover {
            border-color: #53fc18;
            background: rgba(83, 252, 24, 0.05);
        }

        .checkbox-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: #53fc18;
        }

        .checkbox-item label {
            margin: 0;
            cursor: pointer;
            flex: 1;
            color: #efeff1;
            font-size: 0.9em;
        }

        .checkbox-item.checked {
            border-color: #53fc18;
            background: rgba(83, 252, 24, 0.08);
        }

        button {
            background: linear-gradient(135deg, #53fc18 0%, #3dd80a 100%);
            color: #0e0e10;
            border: none;
            padding: 16px 32px;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'Inter', sans-serif;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.2s ease;
            width: 100%;
            margin-top: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(83, 252, 24, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        .result {
            background: rgba(83, 252, 24, 0.08);
            padding: 25px;
            border-radius: 8px;
            margin-top: 25px;
            border: 2px solid #53fc18;
            display: none;
        }

        .result.show {
            display: block;
        }

        .url-display {
            background: #0e0e10;
            padding: 16px;
            border-radius: 8px;
            word-break: break-all;
            color: #53fc18;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            margin: 15px 0;
            border: 1px solid #2d2d35;
        }

        .copy-btn {
            background: linear-gradient(135deg, #53fc18 0%, #3dd80a 100%);
            margin-top: 10px;
        }

        .copy-btn:hover {
            box-shadow: 0 8px 25px rgba(83, 252, 24, 0.4);
        }

        code {
            background: #0e0e10;
            padding: 4px 10px;
            border-radius: 6px;
            color: #53fc18;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            border: 1px solid #2d2d35;
        }

        .voice-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .voice-card {
            background: #0e0e10;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #2d2d35;
            text-align: center;
            transition: all 0.2s ease;
        }

        .voice-card:hover {
            border-color: #53fc18;
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(83, 252, 24, 0.2);
        }

        .voice-name {
            font-weight: 600;
            color: #53fc18;
            margin-bottom: 5px;
            font-size: 1.1em;
        }

        .voice-type {
            font-size: 0.85em;
            color: #adadb8;
        }

        ul {
            list-style: none;
            padding-left: 0;
        }

        ul li {
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
            color: #efeff1;
            font-size: 0.95em;
        }

        ul li:before {
            content: "▸";
            color: #53fc18;
            position: absolute;
            left: 0;
            font-weight: bold;
            font-size: 1.2em;
        }

        .info-box {
            background: rgba(83, 252, 24, 0.08);
            border-left: 4px solid #53fc18;
            padding: 15px 18px;
            margin: 15px 0;
            border-radius: 6px;
            font-size: 0.9em;
        }

        .info-box strong {
            color: #53fc18;
        }

        .warning-box {
            background: rgba(255, 165, 0, 0.08);
            border-left: 4px solid #ffa500;
            padding: 15px 18px;
            margin: 15px 0;
            border-radius: 6px;
            font-size: 0.9em;
        }

        .warning-box strong {
            color: #ffa500;
        }

        svg {
            width: 35px;
            height: 35px;
        }

        .voice-badge {
            display: inline-block;
            background: rgba(83, 252, 24, 0.15);
            color: #53fc18;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.75em;
            font-weight: 600;
            margin-top: 5px;
        }

        .voice-badge.google {
            background: rgba(66, 133, 244, 0.15);
            color: #4285f4;
        }

        .voice-badge.microsoft {
            background: rgba(0, 120, 212, 0.15);
            color: #0078d4;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2em;
            }

            .container {
                padding: 20px 15px;
            }

            .section, .generator {
                padding: 25px 20px;
            }

            .checkbox-group {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container" id="readme">
        <header>
            <div class="logo">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2C10.9 2 10 2.9 10 4V12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12V4C14 2.9 13.1 2 12 2Z" fill="#53fc18"/>
                    <path d="M19 10C19 6.1 15.9 3 12 3C8.1 3 5 6.1 5 10H7C7 7.2 9.2 5 12 5C14.8 5 17 7.2 17 10H19Z" fill="#53fc18" opacity="0.6"/>
                    <path d="M12 16C8.1 16 5 12.9 5 9H7C7 11.8 9.2 14 12 14C14.8 14 17 11.8 17 9H19C19 12.9 15.9 16 12 16Z" fill="#53fc18" opacity="0.6"/>
                    <path d="M11 16H13V22H11V16Z" fill="#53fc18"/>
                    <path d="M8 22H16V20H8V22Z" fill="#53fc18"/>
                </svg>
                <h1>Polish Kick TTS</h1>
            </div>
            <p class="subtitle">System Text-to-Speech dla polskich streamerów Kick.com</p>
        </header>

        <div class="generator">
            <h2>
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M22.7 19L13.6 9.9C14.5 7.6 14 4.9 12.1 3C9.6 0.5 5.6 0.5 3.1 3C0.6 5.5 0.6 9.5 3.1 12C5 13.9 7.7 14.4 10 13.5L13 16.5V19H15V17L17 19L15 21L16.4 22.4L18 20.8L19.6 22.4L21 21L19.4 19.4L21 17.8L19.6 16.4L17.6 18.4L19.7 19ZM5.2 10.9C3.5 9.2 3.5 6.6 5.2 4.9C6.9 3.2 9.5 3.2 11.2 4.9C12.9 6.6 12.9 9.2 11.2 10.9C9.5 12.6 6.9 12.6 5.2 10.9Z" fill="#53fc18"/>
                </svg>
                Generator Linku TTS
            </h2>
            
            <div class="form-group">
                <label for="channel">Nazwa Kanału (wymagane)</label>
                <input type="text" id="channel" placeholder="np. twoj_nick" required>
                <small style="color: #adadb8; font-size: 0.85em; display: block; margin-top: 8px;">
                Wpisz swoją nazwę kanału dokładnie tak jak jest na Kick.com (z zachowaniem wielkości liter i znaków)
                </small>
            </div>

            <div class="form-group">
                <label for="voice">Głos</label>
                <select id="voice" onchange="handleVoiceChange()">
                    <optgroup label="Oddcast TTS">
                        <option value="Zosia">Zosia (Kobieta - Domyślny)</option>
                        <option value="Agatka">Agatka (Kobieta)</option>
                        <option value="Danota">Danota (Kobieta)</option>
                        <option value="Krzysztof">Krzysztof (Mężczyzna)</option>
                        <option value="Wojciech">Wojciech (Mężczyzna)</option>
                    </optgroup>
                    <optgroup label="Microsoft TTS">
                        <option value="Adam">Adam (Mężczyzna - Microsoft)</option>
                    </optgroup>
                    <optgroup label="Google Translate TTS">
                        <option value="GooglePL">Google Polish (Mężczyzna - Google)</option>
                    </optgroup>
                </select>
            </div>

            <div class="form-group" id="speed-group">
                <label for="speed">Prędkość mowy: <span id="speed-value">0</span></label>
                <div class="range-container">
                    <input type="range" id="speed" min="-3" max="3" value="0" step="1">
                    <div class="range-value" id="speed-display">0</div>
                </div>
                <small style="color: #adadb8; font-size: 0.85em;">Wartości ujemne przyspieszają mowę, dodatnie zwalniają.</small>
            </div>

            <div class="form-group">
                <label for="volume">Głośność (0-100)</label>
                <input type="number" id="volume" min="0" max="100" value="80">
            </div>

            <div class="form-group">
                <label>Opcje Czytania</label>
                <div class="checkbox-item">
                    <input type="checkbox" id="readnick" onchange="toggleCheckbox(this)">
                    <label for="readnick">Czytaj nick użytkownika przed wiadomością</label>
                </div>
                <div class="checkbox-item" style="margin-top: 8px;">
                    <input type="checkbox" id="readlinks" onchange="toggleCheckbox(this)">
                    <label for="readlinks">Czytaj linki (jako "LINK")</label>
                </div>
                <div class="checkbox-item" style="margin-top: 8px;">
                    <input type="checkbox" id="reademotes" onchange="toggleCheckbox(this)">
                    <label for="reademotes">Czytaj emotki</label>
                </div>
                <small style="color: #adadb8; font-size: 0.85em; display: block; margin-top: 8px;">
                    Domyślnie linki i emotki są ignorowane. Zaznacz opcje aby je czytać.
                </small>
            </div>

            <div class="form-group">
                <label>Uprawnienia</label>
                <div class="info-box">
                    <strong>Uwaga:</strong> Broadcaster ma zawsze dostęp niezależnie od ustawień
                </div>
                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="anyone" onchange="toggleCheckbox(this)">
                        <label for="anyone">Każdy</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="follower" onchange="toggleCheckbox(this)">
                        <label for="follower">Obserwujący</label>
                    </div>
                    <div class="checkbox-item checked">
                        <input type="checkbox" id="moderator" checked onchange="toggleCheckbox(this)">
                        <label for="moderator">Moderator</label>
                    </div>
                    <div class="checkbox-item checked">
                        <input type="checkbox" id="og" checked onchange="toggleCheckbox(this)">
                        <label for="og">OG</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="subscriber" onchange="toggleCheckbox(this)">
                        <label for="subscriber">Subskrybent</label>
                    </div>
                    <div class="checkbox-item checked">
                        <input type="checkbox" id="vip" checked onchange="toggleCheckbox(this)">
                        <label for="vip">VIP</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>Format Wiadomości</label>
                <div class="checkbox-item checked">
                    <input type="checkbox" id="pretext" checked onchange="toggleCheckbox(this)">
                    <label for="pretext">Wymagaj "tts" przed wiadomością</label>
                </div>
            </div>

            <button onclick="generateURL()">Wygeneruj Link TTS</button>
            
            <div class="result" id="result">
                <h3>Twój Link TTS:</h3>
                <div class="url-display" id="url-display"></div>
                <button class="copy-btn" onclick="copyURL()">Skopiuj Link</button>
            </div>
        </div>

        <div class="section">
            <h2>
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19Z" fill="#53fc18"/>
                    <path d="M7 17H9V10H7V17ZM11 17H13V7H11V17ZM15 17H17V13H15V17Z" fill="#53fc18"/>
                </svg>
                Co to jest?
            </h2>
            <p>Polish Kick TTS to system Text-to-Speech dla polskich streamerów Kick.com. Gdy użytkownicy wysyłają wiadomości na czacie, będą one automatycznie czytane na głos przy użyciu polskiej syntezy mowy.</p>
        </div>

        <div class="section">
            <h2>
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2L2 7V17C2 17 2 22 12 22C22 22 22 17 22 17V7L12 2Z" stroke="#53fc18" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
                    <path d="M12 11C13.66 11 15 9.66 15 8C15 6.34 13.66 5 12 5C10.34 5 9 6.34 9 8C9 9.66 10.34 11 12 11Z" fill="#53fc18"/>
                    <path d="M12 11C9 11 6 12.79 6 15V17H18V15C18 12.79 15 11 12 11Z" fill="#53fc18" opacity="0.6"/>
                </svg>
                Funkcje
            </h2>
            <ul>
                <li>7 polskich głosów (męskich i żeńskich) - Oddcast + Microsoft + Google TTS</li>
                <li>Regulacja prędkości mowy od -3 (szybciej) do +3 (wolniej) - dla Oddcast i Microsoft</li>
                <li>Opcja czytania nicku użytkownika przed wiadomością</li>
                <li>Opcjonalne czytanie linków i emotek (domyślnie wyłączone)</li>
                <li>Szczegółowa kontrola uprawnień (Każdy, Obserwujący, Moderator, OG, Subskrybent, VIP)</li>
                <li>Opcjonalne wymaganie przedrostka "tts"</li>
                <li>Kontrola głośności 0-100</li>
                <li>Automatyczne filtrowanie wiadomości botów</li>
                <li>Perfekcyjne kolejkowanie wiadomości FIFO</li>
                <li>Komenda !skiptts dla broadcastera do pomijania aktualnego TTS</li>
            </ul>
        </div>

        <div class="section">
            <h2>
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="3" fill="#53fc18"/>
                    <path d="M19.4 15C19.5 14.7 19.5 14.3 19.4 14L21.5 12.3C21.7 12.1 21.7 11.8 21.6 11.6L19.6 8.4C19.5 8.2 19.2 8.1 19 8.2L16.6 9.2C16.1 8.8 15.6 8.5 15 8.3L14.6 5.7C14.6 5.5 14.4 5.3 14.2 5.3H10.2C10 5.3 9.8 5.5 9.8 5.7L9.4 8.3C8.8 8.5 8.3 8.8 7.8 9.2L5.4 8.2C5.2 8.1 4.9 8.2 4.8 8.4L2.8 11.6C2.7 11.8 2.7 12.1 2.9 12.3L5 14C4.9 14.3 4.9 14.7 5 15L2.9 16.7C2.7 16.9 2.7 17.2 2.8 17.4L4.8 20.6C4.9 20.8 5.2 20.9 5.4 20.8L7.8 19.8C8.3 20.2 8.8 20.5 9.4 20.7L9.8 23.3C9.8 23.5 10 23.7 10.2 23.7H14.2C14.4 23.7 14.6 23.5 14.6 23.3L15 20.7C15.6 20.5 16.1 20.2 16.6 19.8L19 20.8C19.2 20.9 19.5 20.8 19.6 20.6L21.6 17.4C21.7 17.2 21.7 16.9 21.5 16.7L19.4 15Z" fill="#53fc18" opacity="0.6"/>
                </svg>
                Dostępne Głosy
            </h2>
            <div class="voice-grid">
                <div class="voice-card">
                    <div class="voice-name">Zosia</div>
                    <div class="voice-type">Kobieta</div>
                    <div class="voice-badge">Oddcast</div>
                </div>
                <div class="voice-card">
                    <div class="voice-name">Agatka</div>
                    <div class="voice-type">Kobieta</div>
                    <div class="voice-badge">Oddcast</div>
                </div>
                <div class="voice-card">
                    <div class="voice-name">Danota</div>
                    <div class="voice-type">Kobieta</div>
                    <div class="voice-badge">Oddcast</div>
                </div>
                <div class="voice-card">
                    <div class="voice-name">Krzysztof</div>
                    <div class="voice-type">Mężczyzna</div>
                    <div class="voice-badge">Oddcast</div>
                </div>
                <div class="voice-card">
                    <div class="voice-name">Wojciech</div>
                    <div class="voice-type">Mężczyzna</div>
                    <div class="voice-badge">Oddcast</div>
                </div>
                <div class="voice-card">
                    <div class="voice-name">Adam</div>
                    <div class="voice-type">Mężczyzna</div>
                    <div class="voice-badge microsoft">Microsoft</div>
                </div>
                <div class="voice-card">
                    <div class="voice-name">Google Polish</div>
                    <div class="voice-type">Mężczyzna</div>
                    <div class="voice-badge google">Google</div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M11 7h2v2h-2V7zm0 4h2v6h-2v-6z" fill="#53fc18"/>
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" fill="#53fc18" opacity="0.6"/>
                </svg>
                Komendy Broadcastera
            </h2>
            <div class="warning-box">
                <strong>!skiptts</strong> - Natychmiastowe pomijanie aktualnie czytanej wiadomości TTS
            </div>
            <p>Jako broadcaster możesz użyć komendy <code>!skiptts</code> na czacie, aby zatrzymać i pominąć aktualnie odtwarzane TTS. Jest to przydatne, gdy chcesz szybko przerwać długą lub nieodpowiednią wiadomość.</p>
        </div>

        <div class="section">
            <h2>
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3.9 12C3.9 10.29 5.29 8.9 7 8.9H11V7H7C4.24 7 2 9.24 2 12C2 14.76 4.24 17 7 17H11V15.1H7C5.29 15.1 3.9 13.71 3.9 12Z" fill="#53fc18"/>
                    <path d="M8 13H16V11H8V13Z" fill="#53fc18"/>
                    <path d="M17 7H13V8.9H17C18.71 8.9 20.1 10.29 20.1 12C20.1 13.71 18.71 15.1 17 15.1H13V17H17C19.76 17 22 14.76 22 12C22 9.24 19.76 7 17 7Z" fill="#53fc18"/>
                </svg>
                Parametry URL
            </h2>
            
            <h3><code>channel</code> (wymagane)</h3>
            <p>Nazwa Twojego kanału Kick.com</p>

            <h3><code>voice</code> (opcjonalne)</h3>
            <p>Nazwa głosu: Zosia, Agatka, Danota, Krzysztof, Wojciech, Adam, GooglePL</p>
            <p>Domyślnie: Zosia</p>

            <h3><code>speed</code> (opcjonalne)</h3>
            <p>Prędkość mowy od -3 do 3 (tylko dla Oddcast i Microsoft)</p>
            <p>-3 = najszybciej, 0 = normalna prędkość, 3 = najwolniej</p>
            <p>Domyślnie: 0</p>
            <p><em>Uwaga: Parametr speed jest ignorowany dla głosu Google TTS</em></p>

            <h3><code>volume</code> (opcjonalne)</h3>
            <p>Poziom głośności od 0 do 100</p>
            <p>Domyślnie: 80</p>

            <h3><code>readnick</code> (opcjonalne)</h3>
            <p>Czytaj nick użytkownika przed wiadomością</p>
            <p>Wartości: on / off (Domyślnie: off)</p>

            <h3><code>readlinks</code> (opcjonalne)</h3>
            <p>Czytaj linki jako słowo "LINK"</p>
            <p>Wartości: on / off (Domyślnie: off - linki są ignorowane)</p>

            <h3><code>reademotes</code> (opcjonalne)</h3>
            <p>Czytaj nazwy emotek</p>
            <p>Wartości: on / off (Domyślnie: off - emotki są ignorowane)</p>

            <h3>Parametry Uprawnień:</h3>
            <ul>
                <li><code>anyone=on</code> - Pozwól wszystkim</li>
                <li><code>follower=on</code> - Pozwól obserwującym</li>
                <li><code>moderator=on</code> - Pozwól moderatorom (domyślnie włączone)</li>
                <li><code>og=on</code> - Pozwól posiadaczom odznaki OG (domyślnie włączone)</li>
                <li><code>subscriber=on</code> - Pozwól subskrybentom</li>
                <li><code>vip=on</code> - Pozwól VIP-om (domyślnie włączone)</li>
            </ul>

            <h3><code>pretext</code> (opcjonalne)</h3>
            <p>Wymagaj "tts" na początku wiadomości</p>
            <p>Wartości: on / off (Domyślnie: on - wymagane)</p>
        </div>

        <div class="section">
            <h2>
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2L2 7L12 12L22 7L12 2Z" fill="#53fc18"/>
                    <path d="M2 17L12 22L22 17V12L12 17L2 12V17Z" fill="#53fc18" opacity="0.6"/>
                </svg>
                Jak Używać
            </h2>
            <ul>
                <li>Wygeneruj swój link TTS używając generatora powyżej</li>
                <li>Dodaj go jako Browser Source w OBS/Streamlabs</li>
                <li>Ustaw wymiary na 800x600 (rozmiar nie ma znaczenia, będzie niewidoczne)</li>
                <li>Zacznij streamować</li>
                <li>Autoryzowani użytkownicy mogą teraz wysyłać wiadomości rozpoczynające się od "tts", które będą czytane na głos</li>
                <li>Używaj <code>!skiptts</code> aby pominąć aktualne TTS</li>
            </ul>
        </div>
    </div>

    <script>
        // Handle voice change to show/hide speed option
        function handleVoiceChange() {
            const voice = document.getElementById('voice').value;
            const speedGroup = document.getElementById('speed-group');
            
            if (voice === 'GooglePL') {
                speedGroup.classList.add('hidden');
                // Reset speed to 0 when Google is selected
                document.getElementById('speed').value = '0';
                document.getElementById('speed-value').textContent = '0';
                document.getElementById('speed-display').textContent = '0';
            } else {
                speedGroup.classList.remove('hidden');
            }
        }

        // Update speed display
        document.getElementById('speed').addEventListener('input', function() {
            const value = this.value;
            document.getElementById('speed-value').textContent = value;
            document.getElementById('speed-display').textContent = value;
        });

        function toggleCheckbox(checkbox) {
            const parent = checkbox.parentElement;
            if (checkbox.checked) {
                parent.classList.add('checked');
            } else {
                parent.classList.remove('checked');
            }
        }

        const urlParams = new URLSearchParams(window.location.search);
        const hasChannel = urlParams.has('channel');

        if (hasChannel) {
            document.getElementById('readme').style.display = 'none';
            document.body.style.background = 'transparent';
            initTTS();
        }

        function generateURL() {
            const channel = document.getElementById('channel').value.trim();
            const voice = document.getElementById('voice').value;
            const speed = document.getElementById('speed').value;
            const volume = document.getElementById('volume').value;
            const readnick = document.getElementById('readnick').checked;
            const readlinks = document.getElementById('readlinks').checked;
            const reademotes = document.getElementById('reademotes').checked;
            
            const anyone = document.getElementById('anyone').checked;
            const follower = document.getElementById('follower').checked;
            const moderator = document.getElementById('moderator').checked;
            const og = document.getElementById('og').checked;
            const subscriber = document.getElementById('subscriber').checked;
            const vip = document.getElementById('vip').checked;
            const pretext = document.getElementById('pretext').checked;

            if (!channel) {
                alert('Proszę podać nazwę kanału!');
                return;
            }

            const baseUrl = window.location.origin + window.location.pathname;
            let url = baseUrl + '?channel=' + encodeURIComponent(channel);
            
            if (voice !== 'Zosia') url += '&voice=' + voice;
            // Only add speed parameter if not Google TTS
            if (speed !== '0' && voice !== 'GooglePL') url += '&speed=' + speed;
            if (volume !== '80') url += '&volume=' + volume;
            if (readnick) url += '&readnick=on';
            if (readlinks) url += '&readlinks=on';
            if (reademotes) url += '&reademotes=on';
            if (anyone) url += '&anyone=on';
            if (follower) url += '&follower=on';
            if (moderator) url += '&moderator=on';
            if (og) url += '&og=on';
            if (subscriber) url += '&subscriber=on';
            if (vip) url += '&vip=on';
            if (pretext) url += '&pretext=on';

            document.getElementById('url-display').textContent = url;
            document.getElementById('result').classList.add('show');
        }

        function copyURL() {
            const urlText = document.getElementById('url-display').textContent;
            navigator.clipboard.writeText(urlText).then(() => {
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = '✓ Skopiowano!';
                setTimeout(() => {
                    btn.textContent = originalText;
                }, 2000);
            });
        }

        function initTTS() {
            const kick = urlParams.get('channel') || 'twoj-nick';
            
            const voices = {
                'Agatka': { EID: '4', LID: '14', VID: '1', type: 'oddcast' },
                'Danota': { EID: '7', LID: '14', VID: '1', type: 'oddcast' },
                'Krzysztof': { EID: '2', LID: '14', VID: '2', type: 'oddcast' },
                'Wojciech': { EID: '7', LID: '14', VID: '2', type: 'oddcast' },
                'Zosia': { EID: '2', LID: '14', VID: '1', type: 'oddcast' },
                'Adam': { name: 'Microsoft Adam - Polish (Poland)', type: 'webspeech' },
                'GooglePL': { lang: 'pl', type: 'google' }
            };

            const voiceName = urlParams.get('voice') || 'Zosia';
            const selectedVoice = voices[voiceName] || voices['Zosia'];
            
            const volume = parseInt(urlParams.get('volume')) || 80;
            // For Google TTS, always use 0 (ignored anyway)
            const speed = selectedVoice.type === 'google' ? 0 : (parseInt(urlParams.get('speed')) || 0);
            const readnick = urlParams.get('readnick') === 'on';
            const readlinks = urlParams.get('readlinks') === 'on';
            const reademotes = urlParams.get('reademotes') === 'on';
            const anyone = urlParams.get('anyone') === 'on';
            const follower = urlParams.get('follower') === 'on';
            const moderator = urlParams.get('moderator') === 'on';
            const og = urlParams.get('og') === 'on';
            const subscriber = urlParams.get('subscriber') === 'on';
            const vip = urlParams.get('vip') === 'on';
            const pretext = urlParams.get('pretext') === 'on';

            console.log('TTS Config:', { kick, voiceName, speed, volume, readnick, readlinks, reademotes, anyone, follower, moderator, og, subscriber, vip, pretext });

            const badgesConfig = {
                'moderator': moderator,
                'vip': vip,
                'og': og,
                'subscriber': subscriber,
                'broadcaster': true
            };

            const excludedKickBots = [
                'kickbot', 'botrix', 'mrbeefbot', 'intrx', 'livebot',
                'logibot', 'lottobot', 'squadbot', 'notibot', 'percent',
                'casterlabs', 'ayybabz', 'babblechat'
            ];

            // ===============================================
            // SYSTEM KOLEJKOWANIA WIADOMOŚCI
            // ===============================================
            const messageQueue = [];
            let isProcessingQueue = false;
            let audio = null;
            let speechSynthesis = window.speechSynthesis;
            let currentUtterance = null;

            // Funkcja do dzielenia tekstu na fragmenty (dla Google TTS - limit 200 znaków)
function splitTextIntoChunks(text, maxLength = 200) {
    const chunks = [];
    const sentences = text.match(/[^.!?]+(?:[.!?]+(?=\s|$))|[^.!?]+$/g) || [text];

    let currentChunk = '';

    for (const sentence of sentences) {
        if (currentChunk.length + sentence.length <= maxLength) {
            currentChunk += sentence;
        } else {
            if (currentChunk) chunks.push(currentChunk.trim());

            if (sentence.length > maxLength) {
                const words = sentence.split(' ');
                currentChunk = '';

                for (const word of words) {
                    if (currentChunk.length + word.length + 1 <= maxLength) {
                        currentChunk += (currentChunk ? ' ' : '') + word;
                    } else {
                        chunks.push(currentChunk.trim());
                        currentChunk = word;
                    }
                }
            } else {
                currentChunk = sentence;
            }
        }
    }

    if (currentChunk) chunks.push(currentChunk.trim());
    return chunks.length > 0 ? chunks : [text];
}


            // Funkcja do odtwarzania Google TTS (bez opcji prędkości)
            async function playGoogleTTS(text, volumeLevel) {
                const chunks = splitTextIntoChunks(text, 200);
                console.log('Google TTS - chunks:', chunks.length);
                
                for (const chunk of chunks) {
                    const encodedText = encodeURIComponent(chunk);
                    const ttsUrl = `https://corsproxy.io/?url=https://translate.google.com/translate_tts?ie=UTF-8&client=tw-ob&tl=pl&q=${encodedText}`;
                    
                    console.log('Playing Google TTS chunk:', chunk.substring(0, 50) + '...');
                    
                    await new Promise((resolve, reject) => {
                        audio = new Audio(ttsUrl);
                        audio.volume = volumeLevel / 100;
                        
                        audio.addEventListener('ended', function() {
                            audio = null;
                            resolve();
                        });

                        audio.addEventListener('error', function(e) {
                            console.error('Google TTS Audio error:', e);
                            audio = null;
                            // Nie rejectuj, kontynuuj do następnego chunka
                            resolve();
                        });

                        audio.play().catch(err => {
                            console.error('Google TTS Play error:', err);
                            audio = null;
                            resolve();
                        });
                    });
                }
            }

            // Funkcja do odtwarzania pojedynczej wiadomości TTS
            async function playTTSSingle(text, volumeLevel, speedValue) {
                const cleanText = text.replace(/%/g, 'percent');
                
                try {
                    if (selectedVoice.type === 'google') {
                        // Use Google Translate TTS (no speed option)
                        console.log('Playing with Google Translate TTS');
                        await playGoogleTTS(cleanText, volumeLevel);
                        console.log('TTS ended (Google)');
                        
                    } else if (selectedVoice.type === 'webspeech') {
                        // Use Web Speech API for Microsoft voices
                        console.log('Playing with Web Speech API');
                        
                        return new Promise((resolve) => {
                            const utterance = new SpeechSynthesisUtterance(cleanText);
                            currentUtterance = utterance;
                            
                            const availableVoices = speechSynthesis.getVoices();
                            const voice = availableVoices.find(v => 
                                v.name.includes('Adam') || 
                                v.name.includes('pl-PL')
                            );
                            
                            if (voice) {
                                utterance.voice = voice;
                            }
                            
                            utterance.volume = volumeLevel / 100;
                            utterance.rate = Math.pow(2, speedValue / 3);
                            utterance.lang = 'pl-PL';
                            
                            utterance.onend = () => {
                                currentUtterance = null;
                                console.log('TTS ended (Web Speech API)');
                                resolve();
                            };
                            
                            utterance.onerror = (e) => {
                                console.error('Speech synthesis error:', e);
                                currentUtterance = null;
                                resolve();
                            };
                            
                            speechSynthesis.speak(utterance);
                        });
                    } else {
                        // Use Oddcast TTS
                        const ttsVoiceEID = selectedVoice.EID;
                        const ttsVoiceLID = selectedVoice.LID;
                        const ttsVoiceVID = selectedVoice.VID;
                        
                        let ttsUrl = 'https://cache-a.oddcast.com/tts/genC.php?EID=' + ttsVoiceEID + '&LID=' + ttsVoiceLID + '&VID=' + ttsVoiceVID + '&TXT=' + encodeURIComponent(cleanText);
                        
                        if (speedValue !== 0) {
                            const reversedSpeed = -speedValue;
                            ttsUrl += '&FX_TYPE=D&FX_LEVEL=' + reversedSpeed;
                        }

                        console.log('Playing with Oddcast TTS');

                        return new Promise((resolve, reject) => {
                            audio = new Audio(ttsUrl);
                            audio.volume = volumeLevel / 100;
                            
                            audio.addEventListener('ended', function() {
                                audio = null;
                                console.log('TTS ended (Oddcast)');
                                resolve();
                            });

                            audio.addEventListener('error', function(e) {
                                console.error('Audio error:', e);
                                audio = null;
                                reject(e);
                            });

                            audio.play().catch(err => {
                                console.error('Play error:', err);
                                audio = null;
                                reject(err);
                            });
                        });
                    }
                } catch (error) {
                    console.error('TTS error:', error);
                    throw error;
                }
            }

            // Główna funkcja przetwarzająca kolejkę
            async function processQueue() {
                if (isProcessingQueue) {
                    console.log('Queue processor already running');
                    return;
                }

                isProcessingQueue = true;
                console.log('Queue processor started');

                while (messageQueue.length > 0) {
                    const message = messageQueue.shift();
                    console.log('Processing message from queue:', message.text.substring(0, 50) + '...');
                    console.log('Messages remaining in queue:', messageQueue.length);

                    try {
                        await playTTSSingle(message.text, message.volume, message.speed);
                    } catch (error) {
                        console.error('Error playing TTS:', error);
                    }
                }

                isProcessingQueue = false;
                console.log('Queue processor finished');
            }

            // Funkcja dodająca wiadomość do kolejki
            function addToQueue(text, volumeLevel, speedValue) {
                messageQueue.push({
                    text: text,
                    volume: volumeLevel,
                    speed: speedValue
                });
                console.log('Added to queue. Queue length:', messageQueue.length);
                
                // Uruchom procesor kolejki jeśli nie jest aktywny
                if (!isProcessingQueue) {
                    processQueue();
                }
            }

            // Funkcja do pomijania aktualnego TTS
            function skipCurrentTTS() {
                console.log('Skipping current TTS');
                if (audio) {
                    audio.pause();
                    audio.currentTime = 0;
                    audio = null;
                }
                if (currentUtterance) {
                    speechSynthesis.cancel();
                    currentUtterance = null;
                }
            }
            // ===============================================

            function hasBroadcasterBadge(badges) {
                return badges && badges.some(badge => badge.type === 'broadcaster');
            }

            async function fetchUserData(username) {
                const response = await fetch('https://kick.com/api/v2/channels/' + username);
                return await response.json();
            }

            async function isFollowedChannel(channelName, username) {
                if (!follower) return true;
                const url = 'https://kick.com/api/v2/channels/' + channelName + '/users/' + username;
                try {
                    const response = await fetch(url);
                    const data = await response.json();
                    return data.following_since !== null;
                } catch (error) {
                    console.error('Follower check error:', error);
                    return false;
                }
            }

            function checkSenderBadges(badges, config, anyoneMode) {
                if (anyoneMode) return true;
                
                if (badges) {
                    const enabledBadges = Object.keys(config).filter(key => config[key]);
                    const senderBadges = badges.map(badge => badge.type);
                    const hasPermission = senderBadges.some(badge => enabledBadges.includes(badge));
                    
                    if (hasPermission) {
                        console.log('User has badges:', senderBadges.join(', '));
                    }
                    
                    return hasPermission;
                }
                return false;
            }

            // Load voices for Web Speech API
            if (speechSynthesis.onvoiceschanged !== undefined) {
                speechSynthesis.onvoiceschanged = () => {
                    const voices = speechSynthesis.getVoices();
                    console.log('Available voices:', voices.map(v => v.name));
                };
            }

            const chat = new WebSocket('wss://ws-us2.pusher.com/app/32cbd69e4b950bf97679?protocol=7&client=js&version=7.6.0&flash=false');

            chat.addEventListener('open', async () => {
                console.log('Connecting to Kick...');
                const userData = await fetchUserData(kick);
                chat.send(JSON.stringify({
                    'event': 'pusher:subscribe',
                    'data': {
                        'auth': '',
                        'channel': 'chatrooms.' + userData.chatroom.id + '.v2'
                    }
                }));
                console.log('Connected to Kick - ' + kick);
            });

            chat.addEventListener('message', async messageEvent => {
                let parsedMessage = JSON.parse(messageEvent.data);

                if (parsedMessage.event !== 'App\\Events\\ChatMessageEvent') {
                    return;
                }

                let messageData = JSON.parse(parsedMessage.data);
                let content = messageData.content;
                let sender = messageData.sender;
                let username = sender.username;
                let identity = sender.identity;
                let badges = identity.badges;

                const isBroadcaster = hasBroadcasterBadge(badges);
                const isFollower = await isFollowedChannel(kick, username);

                if (follower && !isFollower && !isBroadcaster) {
                    console.log('User ' + username + ' is not a follower');
                    return;
                }

                // Handle !skiptts command from broadcaster
                if (isBroadcaster && content.toLowerCase().trim() === '!skiptts') {
                    console.log('Broadcaster skipped TTS');
                    skipCurrentTTS();
                    return;
                }

                // Process links
                let cleanContent;
                if (readlinks) {
                    cleanContent = content.replace(/\b(?:https?|ftp|file):\/\/\S+/gi, 'LINK');
                } else {
                    cleanContent = content.replace(/\b(?:https?|ftp|file):\/\/\S+/gi, '');
                }

                if (content.startsWith('!')) {
                    return;
                }

                if (excludedKickBots.includes(username.toLowerCase())) {
                    return;
                }

                if (checkSenderBadges(badges, badgesConfig, anyone)) {
                    let textToSpeak = cleanContent;
                    
                    if (pretext) {
                        if (!cleanContent.toLowerCase().startsWith('tts')) {
                            return;
                        }
                        textToSpeak = cleanContent.replace(/^tts\s?/i, '');
                    }
                    
                    textToSpeak = textToSpeak.trim();
                    
                    // Process emotes
                    if (reademotes) {
                        textToSpeak = textToSpeak.replace(/\[emote:\d+:(\w+)\]/g, '$1');
                    } else {
                        textToSpeak = textToSpeak.replace(/\[emote:\d+:\w+\]/g, '');
                    }

                    // Clean up extra spaces
                    textToSpeak = textToSpeak.replace(/\s+/g, ' ').trim();

                    // Skip if message is empty after processing
                    if (textToSpeak.length === 0) {
                        console.log('Message empty after processing emotes/links');
                        return;
                    }

                    // Add nickname if readnick is enabled
                    if (readnick) {
                        textToSpeak = username + ' mówi: ' + textToSpeak;
                    }

                    // Dodaj do kolejki zamiast bezpośrednio odtwarzać
                    addToQueue(textToSpeak, volume, speed);
                } else {
                    console.log('User ' + username + ' has no permission');
                }
            });

            chat.addEventListener('error', (error) => {
                console.error('WebSocket error:', error);
            });

            chat.addEventListener('close', () => {
                console.log('WebSocket closed, reconnecting...');
                setTimeout(() => initTTS(), 5000);
            });
        }
    </script>
</body>
</html>
